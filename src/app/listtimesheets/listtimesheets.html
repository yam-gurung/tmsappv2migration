<h1 class="text-center">Timesheets</h1>
@if(message){
<div class="alert alert-success">{{message}}</div>
}
<div class="container">
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-8">
            Project: <input type="text" [(ngModel)]="project" name="project">
        </div>
    </div>
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-8">
            From Date: <input  type="date" [ngModel]="startDate | date:'yyyy-MM-dd'"
            (ngModelChange)="startDate=$event" name="startDate">
            To Date: <input  type="date" [ngModel]="endDate | date:'yyyy-MM-dd'"
            (ngModelChange)="endDate=$event"
            name="endDate">
            <button class="btn btn-success" (click)="searchResult()">Apply</button>
        </div>
    </div>
    </div>
<div class="container">
    <input 
    #query
    (keyup)="filter(query.value)"
    type="type"
    class="form-control"
    placeholder="Search..."
    />
</div>
<div class="container">
<table class="mat-table" width="100%">
    <thead>
        <tr class="mat-header-row">
            <th class="mat-header-cell">ID</th>
            <th class="mat-header-cell">Project</th>
            <th class="mat-header-cell">Logged Date</th>
            <th class="mat-header-cell">From Time</th>
            <th class="mat-header-cell">To Time</th>
            <th class="mat-header-cell">Logged Hr</th>
            <th class="mat-header-cell">Update</th>
            <th class="mat-header-cell">Delete</th>
        </tr>
    </thead>
    <tbody>
         @for (timesheet of filteredTimesheets;track timesheet.id){
        <tr class="mat-row">
           <td class="mat-cell">{{timesheet.id}}</td>
            <td class="mat-cell">{{timesheet.project}}</td>
            <td class="mat-cell">{{timesheet.loginDate|date:'yyyy-MM-dd'}}</td>
            <td class="mat-cell">{{timesheet.fromTime}}</td>
            <td class="mat-cell">{{timesheet.toTime}}</td>
            <td class="mat-cell">{{timesheet.loggedHr}}</td>
            <td><button (click)="updateTimesheet(timesheet.id)"
            class="btn btn-success">Update</button></td>
            <td> <button (click)="deleteTimesheet(timesheet.id)"
            class="btn btn-success">Delete</button><td>
        </tr>}
    </tbody>
</table>
<mat-paginator 
[pageSizeOptions]="[10,25,100]"
[pageSize]="10"
[length]="totalElements"
(page)="nextPage($event)"
arial-label="select page"
>

</mat-paginator>
<div>
    <button class="btn btn-success" (click)="addTimesheet()">Add Timesheet</button>
</div>
</div>